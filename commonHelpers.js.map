{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport axios from \"axios\";\n\nconst searchForm = document.querySelector('.search-form');\nconst searchInput = document.querySelector('.search-input');\nconst galleryList = document.querySelector('.gallery-list');\nconst loader = document.querySelector('.loader');\nconst loadMoreButton = document.querySelector('.load-more');\n\nconst lightbox = new SimpleLightbox('.gallery a');\n\nlet currentPage = 1;\nlet currentQuery = '';\n\nsearchForm.addEventListener('submit', async (event) => {\n    event.preventDefault();\n\n    const inputValue = searchInput.value.trim();\n\n    if (inputValue === '') {\n        iziToast.error({\n            title: 'Error',\n            message: 'Please enter a search query!',\n            position: 'topRight',\n        });\n        return;\n    }\n\n    currentQuery = inputValue;\n    currentPage = 1;\n    loader.style.display = 'block';\n    galleryList.innerHTML = '';\n    loadMoreButton.style.display = 'none';\n\n    await searchImages(currentQuery, currentPage);\n});\n\nloadMoreButton.addEventListener('click', async () => {\n    currentPage++;\n    loader.style.display = 'block';\n    await searchImages(currentQuery, currentPage);\n});\n\nasync function searchImages(query, page) {\n    const apiKey = '36996517-56800863ae540be6945d0f4f2';\n    const perPage = 15;\n    const url = `https://pixabay.com/api/?key=${apiKey}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n    try {\n        const response = await axios.get(url);\n        const data = response.data;\n\n        if (data.hits.length === 0) {\n            iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n                timeout: 3000,\n            });\n            return;\n        }\n\n        galleryList.innerHTML += data.hits.map(image => {\n            const imageElement = \n            `<li class=\"gallery-item\">\n                <a href=\"${image.largeImageURL}\" data-lightbox=\"gallery\" data-title=\"${image.tags}\">\n                    <img class=\"img-item\" src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n                </a>\n                <ul class=\"image-properties\">\n                    <li>Likes <br/>${image.likes}</li>\n                    <li>Views <br/>${image.views}</li>\n                    <li>Comments <br/>${image.comments}</li>\n                    <li>Downloads <br/>${image.downloads}</li>\n                </ul>\n            </li>`;\n            return imageElement;\n        }).join('');\n\n        loader.style.display = 'none';\n        lightbox.refresh();\n\n        if (data.totalHits > page * perPage) {\n            loadMoreButton.style.display = 'block';\n        } else {\n            loadMoreButton.style.display = 'none';\n        }\n    } catch (error) {\n        iziToast.error({\n            message: 'There has been a problem with your fetch operation!',\n            position: 'topRight',\n            timeout: 3000,\n        });\n        loader.style.display = 'none';\n    }\n}"],"names":["searchForm","searchInput","galleryList","loader","loadMoreButton","lightbox","SimpleLightbox","currentPage","currentQuery","event","inputValue","iziToast","searchImages","query","page","url","data","axios","image"],"mappings":"owBAYA,MAAMA,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAiB,SAAS,cAAc,YAAY,EAEpDC,EAAW,IAAIC,EAAe,YAAY,EAEhD,IAAIC,EAAc,EACdC,EAAe,GAEnBR,EAAW,iBAAiB,SAAU,MAAOS,GAAU,CACnDA,EAAM,eAAc,EAEpB,MAAMC,EAAaT,EAAY,MAAM,KAAI,EAEzC,GAAIS,IAAe,GAAI,CACnBC,EAAS,MAAM,CACX,MAAO,QACP,QAAS,+BACT,SAAU,UACtB,CAAS,EACD,MACH,CAEDH,EAAeE,EACfH,EAAc,EACdJ,EAAO,MAAM,QAAU,QACvBD,EAAY,UAAY,GACxBE,EAAe,MAAM,QAAU,OAE/B,MAAMQ,EAAaJ,EAAcD,CAAW,CAChD,CAAC,EAEDH,EAAe,iBAAiB,QAAS,SAAY,CACjDG,IACAJ,EAAO,MAAM,QAAU,QACvB,MAAMS,EAAaJ,EAAcD,CAAW,CAChD,CAAC,EAED,eAAeK,EAAaC,EAAOC,EAAM,CAGrC,MAAMC,EAAM,qEAA4CF,kEAAsEC,cAAiB,KAE/I,GAAI,CAEA,MAAME,GADW,MAAMC,EAAM,IAAIF,CAAG,GACd,KAEtB,GAAIC,EAAK,KAAK,SAAW,EAAG,CACxBL,EAAS,MAAM,CACX,QAAS,2EACT,SAAU,WACV,QAAS,GACzB,CAAa,EACD,MACH,CAEDT,EAAY,WAAac,EAAK,KAAK,IAAIE,GAEnC;AAAA,2BACeA,EAAM,sDAAsDA,EAAM;AAAA,iDAC5CA,EAAM,sBAAsBA,EAAM;AAAA;AAAA;AAAA,qCAG9CA,EAAM;AAAA,qCACNA,EAAM;AAAA,wCACHA,EAAM;AAAA,yCACLA,EAAM;AAAA;AAAA,kBAItC,EAAE,KAAK,EAAE,EAEVf,EAAO,MAAM,QAAU,OACvBE,EAAS,QAAO,EAEZW,EAAK,UAAYF,EAAO,GACxBV,EAAe,MAAM,QAAU,QAE/BA,EAAe,MAAM,QAAU,MAEtC,MAAC,CACEO,EAAS,MAAM,CACX,QAAS,sDACT,SAAU,WACV,QAAS,GACrB,CAAS,EACDR,EAAO,MAAM,QAAU,MAC1B,CACL"}