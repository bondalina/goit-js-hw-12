{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from \"axios\";\n\nconst searchForm = document.querySelector('.search-form');\nconst searchInput = document.querySelector('.search-input');\nconst galleryList = document.querySelector('.gallery-list');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nconst lightbox = new SimpleLightbox('.gallery a');\nlet currentPage = 1;\nlet currentQuery = '';\n\nsearchForm.addEventListener('submit', async (event) => {\n    event.preventDefault();\n    const inputValue = searchInput.value.trim();\n    if (inputValue === '') {\n        iziToast.error({\n            title: 'Error',\n            message: 'Please enter a search query!',\n            position: 'topRight',\n        });\n        return;\n    }\n    loader.style.display = 'block';\n    loadMoreBtn.style.display = 'none';\n    currentQuery = inputValue;\n    currentPage = 1;\n    galleryList.innerHTML = '';\n    \n    await searchImages(currentQuery, currentPage);\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n    currentPage += 1;\n    loader.style.display = 'block';\n    await searchImages(currentQuery, currentPage);\n    smoothScroll();\n});\n\nasync function searchImages(query, page) {\n    const apiKey = '36996517-56800863ae540be6945d0f4f2';\n    const perPage = 15;\n    const url = `https://pixabay.com/api/?key=${apiKey}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n    try {\n        const response = await axios.get(url);\n        const data = response.data;\n        searchInput.value = '';\n        if (data.hits.length === 0) {\n            iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n                timeout: 3000,\n            });\n            loader.style.display = 'none';\n            return;\n        }     \n        const imageElements = data.hits.map(image =>              \n            `<li class=\"gallery-item\">\n                <a href=\"${image.largeImageURL}\" data-lightbox=\"gallery\" data-title=\"${image.tags}\">\n                    <img class=\"img-item\" src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n                </a>\n                <ul class=\"image-properties\">\n                    <li>Likes <br/>${image.likes}</li>\n                    <li>Views <br/>${image.views}</li>\n                    <li>Comments <br/>${image.comments}</li>\n                    <li>Downloads <br/>${image.downloads}</li>\n                </ul>\n            </li>`           \n        ).join('');\n        galleryList.insertAdjacentHTML(\"beforeend\", imageElements)\n        \n        loader.style.display = 'none';\n        lightbox.refresh(); \n\n        const totalResults = data.totalHits;\n        if (totalResults <= page * perPage) {\n            loadMoreBtn.style.display = 'none';\n                    iziToast.error({\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                    position: 'topRight',\n                    timeout: 3000,\n                });\n            }\n        else {\n            loadMoreBtn.style.display = 'block';\n        }\n\n}   catch (error) {\n        iziToast.error({\n            message: 'There has been a problem with your fetch operation!',\n            position: 'topRight',\n            timeout: 3000,\n        });\n        loader.style.display = 'none';\n    }}\n\n// Плавна прокрутка сторінки\nfunction smoothScroll() {\n    // Отримати висоту однієї карточки галереї\n    const galleryItemHeight = document.querySelector('.gallery-item').getBoundingClientRect().height;\n    // Плавна прокрутка сторінки\n    window.scrollBy({\n        top: galleryItemHeight * 2, // на дві висоти карточки\n        behavior: 'smooth' \n        });\n    }"],"names":["searchForm","searchInput","galleryList","loader","loadMoreBtn","lightbox","SimpleLightbox","currentPage","currentQuery","event","inputValue","iziToast","searchImages","smoothScroll","query","page","url","data","axios","imageElements","image","galleryItemHeight"],"mappings":"owBAMA,MAAMA,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,YAAY,EAEjDC,EAAW,IAAIC,EAAe,YAAY,EAChD,IAAIC,EAAc,EACdC,EAAe,GAEnBR,EAAW,iBAAiB,SAAU,MAAOS,GAAU,CACnDA,EAAM,eAAc,EACpB,MAAMC,EAAaT,EAAY,MAAM,KAAI,EACzC,GAAIS,IAAe,GAAI,CACnBC,EAAS,MAAM,CACX,MAAO,QACP,QAAS,+BACT,SAAU,UACtB,CAAS,EACD,MACH,CACDR,EAAO,MAAM,QAAU,QACvBC,EAAY,MAAM,QAAU,OAC5BI,EAAeE,EACfH,EAAc,EACdL,EAAY,UAAY,GAExB,MAAMU,EAAaJ,EAAcD,CAAW,CAChD,CAAC,EAEDH,EAAY,iBAAiB,QAAS,SAAY,CAC9CG,GAAe,EACfJ,EAAO,MAAM,QAAU,QACvB,MAAMS,EAAaJ,EAAcD,CAAW,EAC5CM,GACJ,CAAC,EAED,eAAeD,EAAaE,EAAOC,EAAM,CAGrC,MAAMC,EAAM,qEAA4CF,kEAAsEC,cAAiB,KAC/I,GAAI,CAEA,MAAME,GADW,MAAMC,EAAM,IAAIF,CAAG,GACd,KAEtB,GADAf,EAAY,MAAQ,GAChBgB,EAAK,KAAK,SAAW,EAAG,CACxBN,EAAS,MAAM,CACX,QAAS,2EACT,SAAU,WACV,QAAS,GACzB,CAAa,EACDR,EAAO,MAAM,QAAU,OACvB,MACH,CACD,MAAMgB,EAAgBF,EAAK,KAAK,IAAIG,GAChC;AAAA,2BACeA,EAAM,sDAAsDA,EAAM;AAAA,iDAC5CA,EAAM,sBAAsBA,EAAM;AAAA;AAAA;AAAA,qCAG9CA,EAAM;AAAA,qCACNA,EAAM;AAAA,wCACHA,EAAM;AAAA,yCACLA,EAAM;AAAA;AAAA,kBAG/C,EAAU,KAAK,EAAE,EACTlB,EAAY,mBAAmB,YAAaiB,CAAa,EAEzDhB,EAAO,MAAM,QAAU,OACvBE,EAAS,QAAO,EAEKY,EAAK,WACNF,EAAO,IACvBX,EAAY,MAAM,QAAU,OACpBO,EAAS,MAAM,CACf,QAAS,6DACT,SAAU,WACV,QAAS,GAC7B,CAAiB,GAGLP,EAAY,MAAM,QAAU,OAGxC,MAAI,CACIO,EAAS,MAAM,CACX,QAAS,sDACT,SAAU,WACV,QAAS,GACrB,CAAS,EACDR,EAAO,MAAM,QAAU,MAC/B,CAAK,CAGL,SAASU,GAAe,CAEpB,MAAMQ,EAAoB,SAAS,cAAc,eAAe,EAAE,sBAAuB,EAAC,OAE1F,OAAO,SAAS,CACZ,IAAKA,EAAoB,EACzB,SAAU,QAClB,CAAS,CACT"}